{% extends "libstat/base.html" %}
{% load i18n %}
{% load libstat_tags %}

{% block content %}
<div class="container">
	<div class="panel panel-default">
		<div class="panel-heading">
			<h3 class="panel-title">Bibliotek</h3>
		</div>
		<div class="panel-body">
			<p>
				Här visas alla bibliotek som importerats från <a href="http://bibdb.libris.kb.se">biblioteksdatabasen</a>.
			</p>
			<form action="{% url 'libraries' %}" method="POST" role="form" class="form-inline">
				{% csrf_token %}
				<div class="form-group">
					{{ form.sample_year }}
					<button type="submit" name="save_selection_btn" class="btn btn-primary">Spara urval</button>
					<button type="submit" name="create_surveys_btn" class="btn btn-primary">Skapa enkät</button>
				</div>
				<span class="pull-right">
					<div class="form-group">
						<a href="{% url 'import_libraries' %}" class="btn btn-primary">Importera bibliotek</a>
					</div>
					<div class="form-group">
						<a href="{% url 'remove_libraries' %}" class="btn btn-danger">Ta bort alla bibliotek</a>
					</div>
				</span>
				<hr>
				<table class="table">
					<thead>
						<tr>
							<th class="column selection">
								<input title="{% trans 'Markera alla' %}" class="select-all"
								type="checkbox" value="all"/>
							</th>
							<th class="column">Namn</th>
							<th class="column">Stad</th>
							<th class="column">Adress</th>
							<th class="column">Email</th>
						</tr>
					</thead>
					<tbody>
						{% for library in form.libraries %}
						<tr>
							<td>
								{% with key=library.checkbox_id %}
									{{ form|access:key }}
								{% endwith %}
							</td>
							<td>
								<a href="http://bibdb.libris.kb.se/library/{{ library.sigel }}">
									{{ library.name }}
								</a>
							</td>
							<td>
								{{ library.city }}
							</td>
							<td>
								{{ library.address }}
							</td>
							<td>
								{{ library.email }}
							</td>
						</tr>
						{% endfor %}
					</tbody>
				</table>
			</form>
		</div>
	</div>
</div>
{% endblock %}